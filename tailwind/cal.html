<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div>
      <div class="flex flex-col justify-center items-center">
        <div class="display w-40 text-right">0</div>
        <span class="result"></span>
        <div class="btn grid grid-cols-4 gap-5">
          <button class="numBtn">7</button>
          <button class="numBtn">8</button>
          <button class="numBtn">9</button>
          <button class="operatorBtn">+</button>

          <button class="numBtn">6</button>
          <button class="numBtn">5</button>
          <button class="numBtn">4</button>
          <button class="operatorBtn">-</button>
          <button class="numBtn">3</button>

          <button class="numBtn">2</button>
          <button class="numBtn">1</button>
          <button class="operatorBtn">*</button>
          <button class="numBtn">0</button>
          <button class="clear">C</button>
          <button class="operatorBtn">/</button>
          <button class="equal">=</button>
        </div>
      </div>
    </div>
    <script>
      const display = document.querySelector(".display");
      const btns = document.querySelectorAll(".btn button");
      const displayResult = document.querySelector(".result");
      let firstNum = "";
      let secondNum = "";
      let currentDisplay = "";
      let operator = "";

      function calculate(firstNum, secondNum, operator) {
        if (operator === "/" && secondNum === "0") return "cant divided by 0";
        if (operator === "+") {
          return Number(firstNum) + Number(secondNum);
        } else if (operator === "-") {
          return Number(firstNum) - Number(secondNum);
        } else if (operator === "*") {
          return Number(firstNum) * Number(secondNum);
        } else if (operator === "/") {
          return Number(firstNum) / Number(secondNum);
        }
      }

      btns.forEach((btn) => {
        btn.addEventListener("click", (e) => {
          if (e.target.classList.contains("numBtn")) {
            currentDisplay += e.target.textContent;
            if (firstNum !== "" && operator !== "") {
              let liveResult = calculate(firstNum, currentDisplay, operator);
              display.textContent = liveResult;
              displayResult.textContent = `${firstNum} ${operator} ${currentDisplay}`;
            } else {
              display.textContent = currentDisplay;
            }
          }
          if (e.target.classList.contains("operatorBtn")) {
            console.log("Before:", { firstNum, operator, currentDisplay });
            if (firstNum !== "" && operator !== "" && currentDisplay !== "") {
              let result = calculate(firstNum, currentDisplay, operator);
              display.textContent = result;
              displayResult.textContent = `${firstNum} ${operator} ${currentDisplay}`;

              firstNum = result.toString();
              currentDisplay = "";
              operator = e.target.textContent;
              displayResult.textContent = `${firstNum} ${operator}`;
              console.log("After:", { firstNum, operator, currentDisplay });
            } else if (currentDisplay !== "") {
              firstNum = currentDisplay;
              operator = e.target.textContent;
              currentDisplay = "";
              displayResult.textContent = `${firstNum} ${operator}`;
            }
          }
          if (e.target.classList.contains("equal")) {
          }

          if (e.target.classList.contains("clear")) {
            firstNum = "";
            operator = "";
            secondNum = "";
            currentDisplay = "";
            display.textContent = "0";
            displayResult.textContent = "";
          }
        });
      });
    </script>
  </body>
</html>
